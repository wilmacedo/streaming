plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.21'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation ("org.jetbrains.kotlin:kotlin-stdlib-jdk8")
    implementation("com.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.12.5")
    implementation("com.squareup.moshi:moshi:1.14.0")
    implementation("com.squareup.moshi:moshi-kotlin:1.14.0")
    implementation("com.sun.net.httpserver:http:20070405")
    implementation ("jakarta.xml.bind:jakarta.xml.bind-api:3.0.0") // Adjust version as needed
    implementation ("org.glassfish.jaxb:jaxb-runtime:2.3.5") // Adjust version as needed
    implementation ("org.eclipse:yasson:1.0.5") // Adjust version as needed
}

jar {
    archiveFileName = "kt.jar"
    manifest {
        attributes(
                'Main-Class': 'MainKt'
        )
    }
    from {
        configurations.runtimeClasspath.filter{ it.exists() }.collect { it.isDirectory() ? it : zipTree(it) }
    }
    duplicatesStrategy = DuplicatesStrategy.INCLUDE
}

test {
    useJUnitPlatform()
}
kotlin {
    jvmToolchain(8)
}